%% This is file `novelette-language.sty',
%% part of `novelette' document class.
%% Copyright 2023 Robert Allgeyer.
%%
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
\ProvidesFile{novelette-language.sty}%
[2023/01/20 v0.2 LaTeX file (language settings)]
%%


%% LANGUAGE
%% ----------------------------------------------------------------------------
% Novelette is intended for popular fiction, written in a single language.
% So, you may set only one main language, which will be used throughout
% your book for hyphenation patterns. The language does not implement other
% LaTeX-related features such as style of dates and times. Only hyphenation!
%   You may still write words and phrases in another language. You may even
% set one main language, then write in an entirely different language.
% Novelette will not complain. It does not know or care what you write.
% But words in the other language will be hyphenated according to the patterns
% of the main language. This may or may not be typogaphically incorrect.
% You can always manually hyphenate or un-hyphenate foreign words.  
%   Exception: If you load the lipsum package, and your TeX system has the
% latin hyphenation installed, then latin hyphenation will be automatically
% used for the lipsum text, regardless of your main language setting.
%   Default language is "american" using the "usenglishmax" hyphenation.
% If you request "english" you will get "american". If you prefer British
% usage, then request "british" language.
%   Reminder: The language setting is not a spelling or grammar check.
% In Novelette, it does no special styling. All it does is select hyphenation.
%%


%%
\def\nvt@setlang{}
\newcounter{nvt@langcount}
\newcommand\setlang[1]{\gdef\nvt@setlang{#1}}
%%

\def\nvt@american{:American:american:English:english:usenglish:usenglishmax:%
  :en-us:en-US:USenglish:us-english:en:english-us:}

\def\nvt@british{:British:british:en-gb:en-GB:ukenglish:uk-english:english-uk:}

\def\nvt@spanish{:Spanish:spanish:espanol:es:es-es:es-ES:es-mx:es-MX:mexican:}

%% Other languages may be added in the future. Any any case, only Western
%% European languages will be added.


%%
\def\@process@nvtlang{ % AtEndPreamble.
  \setcounter{nvt@langcount}{0}
  \IfSubStr{\nvt@american}{:\nvt@setlang:}{
    \stepcounter{nvt@langcount}
    \gdef\nvt@lang{american}
    \HyphenRules{usenglishmax}
  }{}
  \IfSubStr{\nvt@british}{:\nvt@setlang:}{
    \stepcounter{nvt@langcount}
    \ifnumless{\value{nvt@langcount}}{2}{
      \gdef\nvt@lang{british}
      \HyphenRules{ukenglish}  
    }{}
  }{}
  \IfSubStr{\nvt@spanish}{:\nvt@setlang:}{
    \stepcounter{nvt@langcount}
    \ifnumless{\value{nvt@langcount}}{2}{
      \gdef\nvt@lang{spanish}
      \HyphenRules{spanish}  
    }{}
  }{}
  %%
  %% If other languages are added, they go here.
  %%
  \ifnumless{\value{nvt@langcount}}{1}{
    \gdef\nvt@lang{american}
    \HyphenRules{usenglishmax}
    \@infoDEFL % Default language.
  }{}
  \ifnumgreater{\value{nvt@langcount}}{1}{
    \@warnTML % Too many languages.
  }{}
}
\@onlypreamble\setlang
%%


%%
\endinput
%%
%% End of file `novelette-language.sty'.
