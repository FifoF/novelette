%% This is file `novelette-language.sty',
%% part of `novelette' document class.
%% Copyright 2023 Robert Allgeyer.
%%
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
\ProvidesFile{novelette-language.sty}%
[2023/01/20 v0.2 LaTeX file (language settings)]
%%


%% LANGUAGE
%% ----------------------------------------------------------------------------
% Novelette is intended for popular fiction, written in a single language.
% So, you may set only one main language, which will be used throughout
% your book for hyphenation patterns. The language does not implement other
% LaTeX-related features such as style of dates and times. Only hyphenation!
%   You may still write words and phrases in another language. You may even
% set one main language, then write in an entirely different language.
% Novelette will not complain. It does not know or care what you write.
% But words in the other language will be hyphenated according to the patterns
% of the main language. This may or may not be typogaphically incorrect.
% You can always manually hyphenate or un-hyphenate foreign words.  
%   The default hyphenation uses the old TeX "english" patterns. This is
% part of every TeX system. It will be used if you do not set language,
% or use an invalid language code, or more than one language. In these cases,
% a warning is issued. The log summary will show "default" as language.
%   Setting "english" will be interpreted as "default". It probably is not
% what you want. Use "en-US" or "en-GB" instead.
%   If you request an unlisted language variant, such as "fr-CA" for
% French Canadian, then Novelette will substitute the main language "fr".
% No warning is issued, but the log file will have an alert. In general,
% when a variant is unlisted, it means that hyphenation is the same as its
% main language.
%   Novelette does not provide automatic spacing adjustments, which is
% used by French. Do it manually.
% Novelette does not provide automatic time and date format. In a work of
% fiction, you will hardly ever need it. Type it yourself!
%   If you need `lipsum', it is not available. Novelette has built-in nonsense
% text, available in document body by \fillertext command.
%%


%%
\newcounter{nvt@langcnt} \setcounter{nvt@langcnt}{0}
\newcommand\setlang[1]{
  \StrDel{#1}{ }[\temp@s]
  \ifthenelse{\equal{\temp@s}{en-US}}{\gdef\nvt@lang{en-US}
    \gdef\nvt@hyrule{usenglishmax}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{en-GB}}{\gdef\nvt@lang{en-GB}
    \gdef\nvt@hyrule{british}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{en}}{\gdef\nvt@lang{en-GB}
    \gdef\nvt@hyrule{british}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{fr}}{\gdef\nvt@lang{fr}
    \gdef\nvt@hyrule{french}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{de}}{\gdef\nvt@lang{de}
    \gdef\nvt@hyrule{ngerman}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{de-CH}}{\gdef\nvt@lang{de-CH}
    \gdef\nvt@hyrule{swissgerman}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{es}}{\gdef\nvt@lang{es}
    \gdef\nvt@hyrule{spanish}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{pt}}{\gdef\nvt@lang{pt}
    \gdef\nvt@hyrule{portuguese}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{ca}}{\gdef\nvt@lang{ca}
    \gdef\nvt@hyrule{catalan}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{oc}}{\gdef\nvt@lang{oc}
    \gdef\nvt@hyrule{occitan}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{sv}}{\gdef\nvt@lang{sv}
    \gdef\nvt@hyrule{swedish}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{da}}{\gdef\nvt@lang{da}
    \gdef\nvt@hyrule{danish}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{nl}}{\gdef\nvt@lang{nl}
    \gdef\nvt@hyrule{dutch}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{is}}{\gdef\nvt@lang{is}
    \gdef\nvt@hyrule{icelandic}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{no}}{\gdef\nvt@lang{nn}
    \gdef\nvt@hyrule{nynorsk}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{nn}}{\gdef\nvt@lang{nn}
    \gdef\nvt@hyrule{nynorsk}\stepcounter{nvt@langcnt}}{}
  \ifthenelse{\equal{\temp@s}{nb}}{\gdef\nvt@lang{nb}
    \gdef\nvt@hyrule{bokmal}\stepcounter{nvt@langcnt}}{}
  \ifnumless{\value{nvt@langcnt}}{1}{
    \gdef\nvt@lang{default}\gdef\nvt@hyrule{english}
    \@warnDEFL % Default language (did not understand the setting).
  }{}
  \ifnumgreater{\value{nvt@langcnt}}{1}{
    \@warnTML % Too many languages.
  }{}
}
\@onlypreamble\setlang
%%


%%
\def\@process@language{ % Called AtEndPreamble.
  \ifdefined\nvt@lang\else
    \typeout{^^JALERT: \string\setlang\space unset. Default hyphenation.^^J}
    \gdef\nvt@lang{default}
    \gdef\nvt@hyrule{english}
  \fi
  \HyphenRules{\nvt@hyrule}
}
%%


%%
\endinput
%%
%% End of file `novelette-language.sty'.
