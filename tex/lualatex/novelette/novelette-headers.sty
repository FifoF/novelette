%% This is file `novelette-headers.sty',
%% part of `novelette' document class.
%% Copyright 2023 Robert Allgeyer.
%%
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.3c or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
\ProvidesFile{novelette-headers.sty}%
[2023/01/20 v0.2 LaTeX file (header and footer style details)]
%%


\def\versohead#1{\gdef\versoheadtext{#1}}
\def\rectohead#1{\gdef\rectoheadtext{#1}}


%% INITIALIZE FANCYHDR
\providecommand\headrulewidth{0pt}\renewcommand\headrulewidth{0pt}
\providecommand\footrulewidth{0pt}\renewcommand\footrulewidth{0pt}
\fancyhead[LO,RE,LE,RO,CE,CO]{}
\fancyfoot[LO,RE,LE,RO,CE,CO]{}
\gdef\headruleskip{0pt}
\gdef\footruleskip{0pt}
\gdef\headrulewidth{0pt}
\gdef\footrulewidth{0pt}
%%


%% THISPAGESTYLE COMMANDS
% Re-define \thispagestyle based on design. When it requests only the page
% number, decide based on this command and whether footer is used:
\fancypagestyle{footer}{\fancyhead[LO,RE,LE,RO,CE,CO]{}}
\fancypagestyle{plain}{\fancyhead[LO,RE,LE,RO,CE,CO]{}}
\fancypagestyle{fancyplain}{\fancyhead[LO,RE,LE,RO,CE,CO]{}}
%%


%%
\def\nvt@headily#1{%
  {\rule{0pt}{\nvt@leading-\nvt@dscn}{\nvt@headfont\addfontfeature{LetterSpace=2}#1}}%
}
\def\nvt@widebar{%
  \rule[-\nvt@dscn]{.08em}{\nvt@dscn+\nvt@ascn}%
}
%%


%% PROCESS HFSTYLE
\def\nvt@processnvt@hfstyle{ % Called AtEndPreamble.
  \ifthenelse{\equal{\nvt@hfstyle}{1}}{
    \fancyfoot[CO,CE]{\rule{0pt}{\nvt@ascn}%
      {\nvt@headfont\pagenumber}}
  }{}
  \ifthenelse{\equal{\nvt@hfstyle}{2}}{
    \fancyhead[CE]{\nvt@headily{\versoheadtext}}
    \fancyhead[CO]{\nvt@headily{\rectoheadtext}}
    \fancyfoot[CO,CE]{\rule{0pt}{\nvt@ascn}%
      {\nvt@headfont\pagenumber}}
  }{}
  \ifthenelse{\equal{\nvt@hfstyle}{3}}{
    \fancyhead[LE]{\nvt@headily{\versoheadtext}}
    \fancyhead[RO]{\nvt@headily{\rectoheadtext}}
    \fancyfoot[LE,RO]{\vfil\leavevmode\rule{0pt}{\nvt@leading}%
     {\nvt@headfont\pagenumber}}
  }{}
  \ifthenelse{\equal{\nvt@hfstyle}{4}}{
    \fancyhead[LE]{\nvt@headily{\pagenumber}}
    \fancyhead[RO]{\nvt@headily{\pagenumber}}
    \fancyhead[CE]{\nvt@headily{\versoheadtext}}
    \fancyhead[CO]{\nvt@headily{\rectoheadtext}}
  }{}
  \ifthenelse{\equal{\nvt@hfstyle}{5}}{
    \fancyhead[LE]{\nvt@headily{\makebox[2\normalindent][l]{\pagenumber}\nvt@widebar}}
    \fancyhead[CE]{\nvt@headily{\versoheadtext}}
    \fancyhead[CO]{\nvt@headily{\rectoheadtext}}
    \fancyhead[RO]{\nvt@headily{\nvt@widebar\makebox[2\normalindent][r]{\pagenumber}}}
  }{}
  \ifthenelse{\equal{\nvt@hfstyle}{6}}{
    \fancyhead[LE]{\nvt@headily{\pagenumber~/}}
    \fancyhead[CE]{\nvt@headily{\versoheadtext}}
    \fancyhead[CO]{\nvt@headily{\rectoheadtext}}
    \fancyhead[RO]{\nvt@headily{/~\pagenumber}}
  }{}
  \ifthenelse{\equal{\nvt@hfstyle}{7}}{
    \fancyhead[CE]{\nvt@headily{\pagenumber~/~\versoheadtext}}
    \fancyhead[CO]{\nvt@headily{\rectoheadtext~/~\pagenumber}}
  }{}
  \pagestyle{fancy} % Unless over-ridden by \thispagestyle.
}
%%


%%
\endinput
%%
%% End of file `novelette-headers.sty'
